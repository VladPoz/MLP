{"ast":null,"code":"import { useState as d, useRef as A, useEffect as k } from \"react\";\nimport * as I from \"pdfjs-dist\";\nimport { ErrorType as F } from \"../types.js\";\nimport { getThumbnailViewport as j } from \"../getThumbnailViewport.js\";\nimport { useConfigContext as z } from \"../../contexts/ConfigContext.js\";\nimport { useDocumentPasswordContext as _ } from \"../../contexts/DocumentPasswordContext.js\";\nimport \"../../th_TH-d627cd51.js\";\nimport \"react/jsx-runtime\";\nimport \"../appConsole.js\";\nconst Y = (m, s, h = {}) => {\n  const [n, q] = d(),\n    {\n      workerUrlAdded: v\n    } = z(),\n    [D, S] = d(/* @__PURE__ */new Map()),\n    a = A(),\n    [f, g] = d(0),\n    [P, T] = d(!1),\n    [N, O] = d(),\n    {\n      password: u,\n      passwordError: U,\n      setPasswordError: c,\n      passwordRequired: p,\n      setPasswordRequired: w\n    } = _(),\n    {\n      onLoadError: i,\n      onLoaded: E,\n      onLoadProgress: b,\n      disableAutoFetch: x,\n      disableStream: C,\n      rangeChunkSize: V\n    } = h;\n  return k(() => {\n    b && b(f);\n  }, [f, b]), k(() => {\n    if (!v || !m) return;\n    g(0), a.current = Date.now();\n    const r = a.current,\n      R = {\n        url: m,\n        cMapPacked: (s == null ? void 0 : s.isCompressed) ?? !0,\n        ...((s == null ? void 0 : s.url) && {\n          cMapUrl: s.url\n        }),\n        ...(u && {\n          password: u\n        }),\n        ...(x !== void 0 && {\n          disableAutoFetch: x\n        }),\n        ...(C !== void 0 && {\n          disableStream: C\n        }),\n        ...(V !== void 0 && {\n          rangeChunkSize: V\n        }),\n        verbosity: I.VerbosityLevel.ERRORS\n      };\n    try {\n      const e = I.getDocument(R);\n      e.onProgress = o => {\n        if (r === a.current) {\n          const {\n              loaded: y,\n              total: l\n            } = o,\n            L = l ? Math.min(100, Math.round(y / l * 100)) : 0;\n          g(L);\n        }\n      }, T(!0);\n      const t = e.promise.then(o => (r === a.current && (q(o), g(100)), E && E(o), w(!1), c(\"\"), o)).catch(o => {\n        o instanceof Error && o.name === \"PasswordException\" ? (w(!0), c(o.message || \"Password required\")) : o instanceof Error && o.name === \"InvalidPDFException\" && u ? (w(!0), c(\"Incorrect password\")) : i && i(o);\n      }).finally(() => {\n        T(!1);\n      });\n      return () => {\n        t.finally(() => {\n          e.destroy();\n        });\n      };\n    } catch (e) {\n      O(F.NOT_SUPPORTED), i && i(e);\n    }\n  }, [m, v, u, i, E]), k(() => {\n    if (p) return;\n    const r = /* @__PURE__ */new Map();\n    if (!n || P) {\n      S(r);\n      return;\n    }\n    const R = n.numPages,\n      e = [];\n    for (let t = 1; t <= R; t++) {\n      const o = n.getPage(t);\n      e.push(o);\n    }\n    Promise.all(e).then(t => {\n      t.map(o => {\n        const {\n            thumbnailViewport: y,\n            scale: l\n          } = j(o),\n          L = o.getViewport();\n        r.set(o.pageNumber, {\n          page: o,\n          thumbnailViewport: y,\n          thumbnailScale: l,\n          defaultRotation: L.rotation\n        });\n      }), S(r);\n    });\n  }, [n, P, p]), {\n    pdf: n,\n    pages: D,\n    loading: P,\n    error: N,\n    loadingProgress: f,\n    passwordRequired: p,\n    passwordError: U\n  };\n};\nexport { Y as useLoadPdf };","map":{"version":3,"names":["useState","d","useRef","A","useEffect","k","I","ErrorType","F","getThumbnailViewport","j","useConfigContext","z","useDocumentPasswordContext","_","Y","m","s","h","n","q","workerUrlAdded","v","D","S","Map","a","f","g","P","T","N","O","password","u","passwordError","U","setPasswordError","c","passwordRequired","p","setPasswordRequired","w","onLoadError","i","onLoaded","E","onLoadProgress","b","disableAutoFetch","x","disableStream","C","rangeChunkSize","V","current","Date","now","r","R","url","cMapPacked","isCompressed","cMapUrl","verbosity","VerbosityLevel","ERRORS","e","getDocument","onProgress","o","loaded","y","total","l","L","Math","min","round","t","promise","then","catch","Error","name","message","finally","destroy","NOT_SUPPORTED","numPages","getPage","push","Promise","all","map","thumbnailViewport","scale","getViewport","set","pageNumber","page","thumbnailScale","defaultRotation","rotation","pdf","pages","loading","error","loadingProgress","useLoadPdf"],"sources":["C:/OSPanel/domains/MLP/node_modules/@pdf-viewer/react/dist/utils/hooks/useLoadPdf.js"],"sourcesContent":["import { useState as d, useRef as A, useEffect as k } from \"react\";\nimport * as I from \"pdfjs-dist\";\nimport { ErrorType as F } from \"../types.js\";\nimport { getThumbnailViewport as j } from \"../getThumbnailViewport.js\";\nimport { useConfigContext as z } from \"../../contexts/ConfigContext.js\";\nimport { useDocumentPasswordContext as _ } from \"../../contexts/DocumentPasswordContext.js\";\nimport \"../../th_TH-d627cd51.js\";\nimport \"react/jsx-runtime\";\nimport \"../appConsole.js\";\nconst Y = (m, s, h = {}) => {\n  const [n, q] = d(), { workerUrlAdded: v } = z(), [D, S] = d(/* @__PURE__ */ new Map()), a = A(), [f, g] = d(0), [P, T] = d(!1), [N, O] = d(), { password: u, passwordError: U, setPasswordError: c, passwordRequired: p, setPasswordRequired: w } = _(), { onLoadError: i, onLoaded: E, onLoadProgress: b, disableAutoFetch: x, disableStream: C, rangeChunkSize: V } = h;\n  return k(() => {\n    b && b(f);\n  }, [f, b]), k(() => {\n    if (!v || !m)\n      return;\n    g(0), a.current = Date.now();\n    const r = a.current, R = {\n      url: m,\n      cMapPacked: (s == null ? void 0 : s.isCompressed) ?? !0,\n      ...(s == null ? void 0 : s.url) && { cMapUrl: s.url },\n      ...u && { password: u },\n      ...x !== void 0 && { disableAutoFetch: x },\n      ...C !== void 0 && { disableStream: C },\n      ...V !== void 0 && { rangeChunkSize: V },\n      verbosity: I.VerbosityLevel.ERRORS\n    };\n    try {\n      const e = I.getDocument(R);\n      e.onProgress = (o) => {\n        if (r === a.current) {\n          const { loaded: y, total: l } = o, L = l ? Math.min(100, Math.round(y / l * 100)) : 0;\n          g(L);\n        }\n      }, T(!0);\n      const t = e.promise.then((o) => (r === a.current && (q(o), g(100)), E && E(o), w(!1), c(\"\"), o)).catch((o) => {\n        o instanceof Error && o.name === \"PasswordException\" ? (w(!0), c(o.message || \"Password required\")) : o instanceof Error && o.name === \"InvalidPDFException\" && u ? (w(!0), c(\"Incorrect password\")) : i && i(o);\n      }).finally(() => {\n        T(!1);\n      });\n      return () => {\n        t.finally(() => {\n          e.destroy();\n        });\n      };\n    } catch (e) {\n      O(F.NOT_SUPPORTED), i && i(e);\n    }\n  }, [m, v, u, i, E]), k(() => {\n    if (p)\n      return;\n    const r = /* @__PURE__ */ new Map();\n    if (!n || P) {\n      S(r);\n      return;\n    }\n    const R = n.numPages, e = [];\n    for (let t = 1; t <= R; t++) {\n      const o = n.getPage(t);\n      e.push(o);\n    }\n    Promise.all(e).then((t) => {\n      t.map((o) => {\n        const { thumbnailViewport: y, scale: l } = j(o), L = o.getViewport();\n        r.set(o.pageNumber, {\n          page: o,\n          thumbnailViewport: y,\n          thumbnailScale: l,\n          defaultRotation: L.rotation\n        });\n      }), S(r);\n    });\n  }, [n, P, p]), {\n    pdf: n,\n    pages: D,\n    loading: P,\n    error: N,\n    loadingProgress: f,\n    passwordRequired: p,\n    passwordError: U\n  };\n};\nexport {\n  Y as useLoadPdf\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}